PREFIX ss:     <http://siemens.com/ns#>
PREFIX st:     <http://siemens.com/temporal/ns#>
PREFIX obda:   <https://w3id.org/obda/vocabulary#>
PREFIX rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
BASE <http://siemens.com/temporal/ns#>

[static]
?tb st:monitoredByTemperatureSensor ?ts :-
   { ?tb a ss:Turbine . ?b ss:isPartOf ?tb . ?b a ss:Burner .
     ?b ss:isMonitoredBy ?ts . ?ts a ss:TemperatureSensor . }

[static]
?tb st:monitoredBySpeedSensor ?rs  :-
   { ?tb a ss:Turbine .  ?pt ss:isPartOf ?tb . ?pt a ss:PowerTurbine .
     ?pt ss:isMonitoredBy ?rs . ?rs a ss:RotationSpeedSensor . }

?rs rdf:type st:HighRotorSpeed :-
    { ?rs st:rotorSpeed ?v.  (?v > 1260) }

?rs rdf:type st:LowRotorSpeed  :-
    { ?rs st:rotorSpeed ?v. (?v < 1260) }

?rs rdf:type st:LowRotorSpeedForTenSec  :-
    { ALWAYS IN PAST (0,10S] { ?rs a st:LowRotorSpeed . }}

?ts rdf:type st:MainFlameOn  :-
    { ?ts st:mainFlame ?v. (?v >= 1) }

?tb rdf:type st:MainFlameOnOfTurbine :- {
    ?tb st:monitoredByTemperatureSensor ?ts . ALWAYS IN PAST (0,10S] { ?ts a st:MainFlameOn . }
}

?tb rdf:type st:IncreasingRotorSpeed :- {
    ?tb st:monitoredBySpeedSensor ?rs .
    SOMETIME IN PAST (0,10S] {
                ALWAYS IN PAST (0,30S] { ?rs a st:HighRotorSpeed .}
                SOMETIME IN PAST (0,2S] {
                    ALWAYS IN PAST (0,1S] { ?rs a st:LowRotorSpeed . }
                }
    }
}
?tb rdf:type st:PurgingIsOver :- {
    ?tb rdf:type st:MainFlameOnOfTurbine .
    ?tb rdf:type st:IncreasingRotorSpeed .
}

?rs rdf:type st:HighAndLowRotorSpeed  :- {
ALWAYS IN PAST (0,30S] { ?rs a st:HighRotorSpeed .}
            SOMETIME IN PAST (0,20S] {
                ALWAYS IN PAST (0,10S] { ?rs a st:LowRotorSpeed . }
            }
}

?ts rdf:type st:MainFlameOnForTenSec :- {
ALWAYS IN PAST (0,10S] { ?ts a st:MainFlameOn . }
}